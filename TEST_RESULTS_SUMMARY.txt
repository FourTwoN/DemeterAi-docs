================================================================================
                    TEST EXECUTION SUMMARY - 2025-10-21
================================================================================

OVERALL STATUS: ❌ FAILED (Exit Code: 1)

┌─────────────────────────────────────────────────────────────────────────────┐
│                            TEST RESULTS                                     │
├─────────────────────────────────────────────────────────────────────────────┤
│  Total Tests:     1,327                                                     │
│  ✅ PASSED:        935  (70.5%)  ████████████████████████░░░░░░░░          │
│  ❌ FAILED:         92  ( 6.9%)  ███░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░          │
│  ⚠️  ERROR:        292  (22.0%)  ██████████░░░░░░░░░░░░░░░░░░░░░░          │
│  ⏭️  SKIPPED:        8  ( 0.6%)  ░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░          │
├─────────────────────────────────────────────────────────────────────────────┤
│  Duration:        140.92 seconds (2 min 20 sec)                            │
└─────────────────────────────────────────────────────────────────────────────┘

┌─────────────────────────────────────────────────────────────────────────────┐
│                         COVERAGE ANALYSIS                                   │
├─────────────────────────────────────────────────────────────────────────────┤
│  Total Coverage:  72.8%  ████████████████████░░░░░░░░  (Target: 80%)       │
│  Statements:      5,183                                                     │
│  Missing:         1,410                                                     │
│  Gap:             -7.2%  (need 374 more statements covered)                 │
└─────────────────────────────────────────────────────────────────────────────┘

================================================================================
                           CRITICAL BLOCKERS
================================================================================

🔴 BLOCKER #1: Database Schema Error (292 errors)
   ├─ Error: asyncpg.exceptions.UndefinedColumnError
   ├─ Column: "storage_bin_type_id" not found during FK constraint creation
   ├─ File: app/models/density_parameter.py:132
   ├─ Impact: Prevents 292 tests from running (22% of suite)
   └─ Fix: Verify table creation order or run: alembic upgrade head

🟡 ISSUE #2: ML Pipeline Mocking (11 failures)
   ├─ Error: 'Mock' object is not subscriptable
   ├─ Tests: Segmentation, estimation accuracy, pipeline integration
   └─ Fix: Replace Mock objects with real data

🟡 ISSUE #3: Low Coverage (7.2% below target)
   ├─ 0% Coverage: ml_tasks.py, 7 service modules
   ├─ <20% Coverage: warehouse, storage_area, storage_location services
   └─ Fix: Add integration tests for uncovered services

================================================================================
                              SUCCESS AREAS
================================================================================

✅ Core Infrastructure      68/68   (100%)  ████████████████████████████████
✅ Celery/Redis             14/14   (100%)  ████████████████████████████████
✅ DB Session Management    18/18   (100%)  ████████████████████████████████
⚠️  ML Processing           11/27   ( 41%)  █████████████░░░░░░░░░░░░░░░░░░

================================================================================
                           NEXT ACTIONS (PRIORITY)
================================================================================

1. IMMEDIATE - Fix database schema blocker
   $ docker compose down db_test -v && docker compose up db_test -d
   $ alembic upgrade head
   $ pytest tests/unit/models/ -v

2. HIGH - Achieve 80% coverage
   - Add tests for ml_tasks.py (0% → 80%)
   - Add tests for 7 service modules (0% → 80%)

3. MEDIUM - Fix ML pipeline tests
   - Replace Mock objects in segmentation_service tests
   - Fix estimation accuracy assertions

================================================================================

📊 Full Report: TEST_EXECUTION_REPORT.md
⏱️  Execution Time: 140.92s
📅 Date: 2025-10-21

================================================================================
